---
title: 'HMAC κ³Ό checksum'
date: 2025-11-20
desc: λΉ„μ·ν•μ§€λ§ λ‹¬λΌμ”
thumbnail: /team-member-1.jpeg
category: HMAC, checksum
open: true
---
## HMAC (Hash-Based Message Authentication Code)

μ•”νΈν™” λ‘μ€ μ•½κ°„ λλ‚μ΄ λ‹¤λ¥Έλ‹¤. μ•”νΈν™”λ” ν‰λ¬Έμ„ μ•”νΈλ¬ΈμΌλ΅ λ§λ“  ν›„ (μ•”νΈν™”), λ‹¤μ‹ ν‰λ¬ΈμΌλ΅ λ§λ“¤ λ• (λ³µνΈν™”) ν‚¤κ°€ ν•„μ”ν•λ‹¤.
HMAC μ€ **λ©”μ‹μ§€ + λΉ„λ°€ν‚¤(Sealed secret)** μ„ ν•΄μ‹±ν•μ—¬(e.g base64) κ³ μ • κΈΈμ΄ μ„λ… λ¬ΈμΌλ΅ λ§λ“ λ‹¤. HMAC μ€ λ©”μ‹μ§€κ°€ λ³€μ΅°λμ§€ μ•μ•μμ„ μ¦λ…ν•κΈ° μ„ν•΄ μ‚¬μ©λλ‹¤. κ·Έλ¦¬κ³  μ•”νΈν™”λ‘ λ‹¬λ¦¬ λ³µνΈν™”κ°€ λ¶κ°€λ¥ν•λ‹¤. (μ΄κ±Έ μΌλ°©ν–¥ ν•¨μλΌ ν•λ‚λ΄„)


| κµ¬λ¶„ | μ„¤λ… |
| --- | --- |
| message | κ²€μ¦ν•κ³  μ‹¶μ€ λ°μ΄ν„° (userID, event etc) |
| key | λΉ„λ°€ ν‚¤ (μ„λ²„λ§ μ•κ³  μμ, sealed secret μΌλ΅ λ³΄νΈ) |
| HMAC κ²°κ³Ό | λ©”μ‹μ§€μ β€λ””μ§€ν„Έ μ„λ…β€™  |
| λ³µνΈν™” | λ¶κ°€ (μΌλ°©ν–¥ ν•¨μ: μ•”νΈν™”λ§ κ°€λ¥ν•¨) |
| μ©λ„ | λ°μ΄ν„° λ¬΄κ²°μ„± κ²€μ¦, μ„μ΅° λ°©μ§€ |

λ‚΄κ°€ μ΄λ²¤νΈλ¥Ό μ°Έμ—¬ν•¨ (eventID: 1234, userID: 300)

μ΄ λ‘ κ°’μ„ key μ™€ ν•¨κ» μ•”νΈν™”ν•΄μ„ HMAC κ²°κ³Όλ¥Ό λ‚Έλ‹¤. μ΄κ±Έ κ²€μ¦ν•κ³ μ ν•λ” κ³³μ— λ³΄λƒ„.

λ‹¤λ¥Έκ³³μ—μ„ λ‚΄κ°€ μ΄λ²¤νΈ μ°Έμ—¬ν•κ±Έ κ²€μ¦ν•κΈ° μ„ν•΄μ„  μ„Έκ°€μ§€ κ°’μ„ μ•μ•„μ•Ό ν•¨.

μ°Έμ—¬ν• eventID, userID, κ·Έλ¦¬κ³  key κ°’. μ΄ μ„Έ κ°€μ§€ κ°’μ„ κ°€μ§€κ³  λ‘κ°™μ΄ HMAC κ²°κ³Όλ¥Ό λ‚Έλ‹¤.

λ‘ HMAC μ„λ…λ¬Έμ„ λΉ„κµν•μ—¬ κ°’μ΄ κ°™μΌλ©΄ κ²€μ¦ μ„±κ³µμ΄κ³ , λ‹¤λ¥΄λ©΄ μ„μ΅°λ κ°’μ΄λΌ νλ‹¨ν•¨.

### μμ‹

``` go

key := "mysecretkey123"

message1 := "user_id:100:timestamp:1234567890"
message2 := "user_id:100:timestamp:1234567890"Β  // κ°™μ€ λ©”μ‹μ§€
message3 := "user_id:999:timestamp:1234567890"Β  // λ‹¤λ¥Έ λ©”μ‹μ§€

// κ°™μ€ key + κ°™μ€ message = κ°™μ€ μ„λ…
computeHMAC(key, message1)
// β†’ "x8Kj2L5mN9pQ..."

computeHMAC(key, message2)
// β†’ "x8Kj2L5mN9pQ..."Β  (λ™μΌ!)

// κ°™μ€ key + λ‹¤λ¥Έ message = λ‹¤λ¥Έ μ„λ…
computeHMAC(key, message3)
// β†’ "a1B2c3D4e5F6..."Β  (μ™„μ „ν λ‹¤λ¦„!)

// λ‹¤λ¥Έ key + κ°™μ€ message = λ‹¤λ¥Έ μ„λ…
computeHMAC("wrongkey", message1)
// β†’ "z9Y8x7W6v5U4..."Β  (μ™„μ „ν λ‹¤λ¦„!)

```

###  κ³µκ²© μ‹λ‚λ¦¬μ¤:

``` mdxjs

μ›λ³Έ μ”μ²­:

userId: 100
eventId: lucky_draw
checksum: "K7s9D2f4H6j8..." (μ„λ²„κ°€ μƒμ„±)

κ³µκ²©μκ°€ λ³€μ΅° μ‹λ„:

userId: 999Β  β† λ³€μ΅°!
eventId: lucky_draw
checksum: "K7s9D2f4H6j8..." (κ·Έλ€λ΅ μ‚¬μ©)

μ„λ²„ κ²€μ¦:

expectedChecksum = HMAC(key, "999:lucky_draw")
β†’ "X1y2Z3a4B5c6..." (λ‹¤λ¦„!)

expectedChecksum != receivedChecksum
β†’ π« μ”μ²­ κ±°λ¶€!
```

## Checksumκ³Όμ κ΄€κ³„ (HMAC = λ³΄μ• κ°•ν™”λ checksum)
**Checksum** μ΄ λ¬΄μ—‡μ΄λƒ? λ°μ΄ν„°κ°€ μ „μ†΅λλ” λ™μ• κ°’μ΄ μ¨μ „ν λ³΄μ¥λλ”μ§€ ν™•μΈν•κΈ° μ„ν• μ¤‘λ³µ κ²€μ‚¬μ ν•νƒλ΅,
κ³µκ°„(μ „μ ν†µμ‹ )μ΄λ‚ μ‹κ°„(κΈ°μ–µ μ¥μΉ)μ†μ—μ„ μ†΅μ‹ λ μλ£μ λ¬΄κ²°μ„±μ„ λ³΄νΈν•λ” λ‹¨μν• λ°©λ²•μ΄λ‹¤.
check + sum : μ΄κΈ° μ²΄ν¬μ„¬ μ•κ³ λ¦¬μ¦(ex, LRC, BCC) μ€ μ‹¤μ λ΅ λ°μ΄ν„° λ°”μ΄νΈλ¥Ό λ‹¨μν λ”ν•΄μ„(sum) λ§λ“¤μ–΄λ‚Έ κ°’μ΄μ—κΈ° λ•λ¬Έμ— checksum μ΄λΌλ” λ§μ΄ νƒ„μƒν–λ‹¤.

β†’ **λ°μ΄ν„°κ°€ μ†μƒλμ—λ”μ§€ ν™•μΈν•κΈ° μ„ν•΄ κ³„μ‚°ν• ν•©(κ°’)**

<br/>

> - νμΌ μ „μ†΅μ΄λ‚ λ„¤νΈμ›ν¬ ν¨ν‚·μ—μ„ μ‚¬μ©
> - λ‹¨μ **λ°μ΄ν„° λ³€ν• μ—¬λ¶€λ§ ν™•μΈ**
> - **ν‚¤κ°€ μ—†μ β†’ λ„κµ¬λ“  μ‰½κ² μ„μ΅° κ°€λ¥**

μ¦‰ checksum μ€ λ‹¨μ μ¤λ¥(μ „μ†΅ μ¤‘ λ°μ΄ν„° μλ» λ³΄λ‚΄λ” λ“±)λ” μ΅μ•„λ‚΄μ§€λ§ **μλ„μ μΈ κ³µκ²©(κ°’ λ³€μ΅°)**λ” λ§‰μ§€ λ»ν•λ‹¤.

<br/>

### HMAC = β€λΉ„λ°€ν‚¤κ°€ ν¬ν•¨λ λ³΄μ•μ© checksumβ€

HMAC κ³Ό checksum μ€ λΉ„μ·ν•΄ λ³΄μ΄μ§€λ§ μ„λ΅ κ°λ…μ€ λ‹¤λ¥΄λ‹¤.

| ν•­λ© | μΌλ° checksum | HMAC |
| --- | --- | --- |
| λ©μ  | μ „μ†΅ μ¤‘ μ¤λ¥ κ°μ§€ | μ„μ΅° λ°©μ§€ + λ°μ΄ν„° λ¬΄κ²°μ„± κ²€μ¦ |
| λΉ„λ°€ν‚¤ μ‚¬μ© | β μ—†μ | β”οΈ μμ |
| κ³µκ²©μ μ„μ΅° κ°€λ¥? | κ°€λ¥ | λ§¤μ° μ–΄λ ¤μ›€ (λΉ„λ°€ν‚¤λ¥Ό λ¨λ¥΄λ©΄ μ¬μƒ λ¶κ°€) |
| λ³΄μ• μμ¤€ | λ‚®μ | λ§¤μ° λ†’μ |

**checksum μ€ λ‹¨μ λ¬΄κ²°μ„± κ²€μ‚¬**, **HMAC μ€ λ³΄μ•μ΄ κ°•ν™”λ checksum(=μ„λ…)** μΌλ΅ λ³Ό μ μλ‹¤.

μ‹¤μ λ΅ HMAC κ²°κ³Όλ¥Ό β€checksumβ€ μ΄λΌκ³  λ¶€λ¥΄λ” μ„λΉ„μ¤λ“¤λ„ λ§λ‹¤. μ—„λ°€ν• μλ―Έλ΅λ” **HMAC = μ•”νΈν•™μ  λ©”μ‹μ§€ μΈμ¦ μ½”λ“(Crypto-MAC)** μ΄κ³  μΌλ° checksum λ³΄λ‹¤ ν›¨μ”¬ μ•μ „ν•λ‹¤.

